{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/gif.js","webpack:///./src/components/storage.js","webpack:///./src/components/set-frames-data.js","webpack:///./src/components/draw-line.js","webpack:///./src/components/set-new-data-pixels.js","webpack:///./src/screens/tools/pen-tool.js","webpack:///./src/components/draw-final-line-on-canvas.js","webpack:///./src/screens/tools/line-tool.js","webpack:///./src/screens/tools/eraser-tool.js","webpack:///./src/components/rgb-to-hex.js","webpack:///./src/screens/tools/choose-picker-tool.js","webpack:///./src/screens/tools/paint-backet-tool.js","webpack:///./src/screens/tools/paint-bucket-same-color-tool.js","webpack:///./src/screens/tools/rectangle-tool.js","webpack:///./src/screens/tools/circle-tool.js","webpack:///./src/screens/tools/dithering-tool.js","webpack:///./src/screens/tools/lighten-tool.js","webpack:///./src/screens/info-field/info.js","webpack:///./src/screens/canvas/canvas.js","webpack:///./src/screens/frames/frames.js","webpack:///./src/components/draw-canvas.js","webpack:///./src/components/change-num-of-frames.js","webpack:///./src/screens/preview/preview-animation.js","webpack:///./src/screens/frames/delete-frame-tool.js","webpack:///./src/screens/frames/copy-frame-tool.js","webpack:///./src/screens/frames/move-frame-tool.js","webpack:///./src/components/select-frames.js","webpack:///./src/components/hover-frame-tools.js","webpack:///./src/screens/frames/handle-frame-tool.js","webpack:///./src/components/create-new-frame.js","webpack:///./src/screens/frames/add-frame-button.js","webpack:///./src/screens/preview/slider-fps.js","webpack:///./src/screens/preview/fullsreen-mode.js","webpack:///./src/screens/canvas/canvas-size-button.js","webpack:///./src/screens/colors/colors.js","webpack:///./src/screens/tools/tools.js","webpack:///./src/screens/keyboard/keyboard-shortcuts.js","webpack:///./src/screens/export/export.js","webpack:///./src/components/start-app.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","e","u","a","f","Error","code","length","1","EventEmitter","this","_events","_maxListeners","undefined","isFunction","arg","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","TypeError","emit","type","er","handler","len","args","listeners","error","arguments","err","context","Array","slice","apply","addListener","listener","newListener","push","warned","console","trace","on","once","fired","g","removeListener","list","position","splice","removeAllListeners","listenerCount","evlistener","emitter","2","UA","browser","platform","ua","navigator","userAgent","toLowerCase","match","document","documentMode","version","parseFloat","parseInt","3","GIF","hasProp","indexOf","item","superClass","defaults","frameDefaults","options","base","running","frames","freeWorkers","activeWorkers","setOptions","child","parent","ctor","constructor","__super__","extend","workerScript","workers","repeat","background","quality","width","height","transparent","debug","dither","delay","copy","setOption","_canvas","results","addFrame","image","frame","ImageData","data","CanvasRenderingContext2D","WebGLRenderingContext","getContextData","childNodes","getImageData","render","j","numWorkers","ref","nextFrame","finishedFrames","imageParts","spawnWorkers","globalPalette","renderNextFrame","abort","worker","shift","log","terminate","_this","Math","min","forEach","Worker","onmessage","event","frameFinished","index","finishRendering","k","len1","len2","len3","offset","page","ref1","ref2","pageSize","cursor","round","Uint8Array","set","Blob","task","getTask","postMessage","ctx","createElement","getContext","setFill","fillRect","drawImage","last","canTransfer","./browser.coffee","events","storage","currentTool","colors","primaryColor","secondaryColor","canvas","canvasContain","querySelector","canvasElement","canvasSecondary","sizeCanvas","sizeRect","countOfFrame","countOfDataFrame","currentFrame","framesData","fill","currentFps","setFramesData","x","y","color","currentNum","getAttribute","row","col","indexPiksel","pixelData","setPixelData","drawLine","x1","y1","x2","y2","dx","dy","dx1","abs","dy1","xe","ye","px","py","setNewDataPixels","map","elem","element","drawPen","x0","y0","fillSpaces","h","v","drawPixel","ctxFrame","children","offsetX","offsetY","fillStyle","handleMouseDown","handleMouseMove","handleMouseUp","addPenTool","addEventListener","drawFinalPixelsOnCanvas","drawL","style","zIndex","floor","clearRect","getCoords","addLineTool","drawEraser","deletePixel","addEraserTool","rgbToHex","rgb","hex","Number","toString","fullColorHex","b","primaryColorField","chooseColor","imgData","addColorPickerTool","startR","startG","startB","startA","colorPixel","matchStartColor","getPixelsForFilling","pixelStack","newPose","pop","reachLeft","reachRight","paintBacket","addPaintBacket","paintSameColor","addPaintSameColor","drawRec","startX","startY","endX","endY","drawRect","addRectangleTool","drawCir","putPixel","xC","yC","evenX","evenY","rX","rY","angle","acos","sin","asin","cos","drawCircle","getStartCoords","window","addCircleTool","drawDith","xEven","yEven","addDitheringTool","ligh","getNewLightenColor","cmin","cmax","max","delta","toFixed","rgbToHsl","l1","s1","hslToRgb","getLighten","newColor","addLightenTool","coordsInfo","innerHTML","removeCoords","showCoordsOfPixel","Canvas","pixels","canvasCopy","cloneNode","createCanvas","oldCanvas","size","addEventsOnCanvas","replaceChild","Frame","numData","numOfFrame","frameCopy","frameContain","frameCanvas","numDataOfFrame","numFrameTool","drawCanvas","changeNumOfFrames","getElementsByClassName","setAttribute","changeNum","preview","ctxPreview","sliderFps","createPreviewAnimation","async","fps","ms","indexFrame","frameOfAnimation","Promise","resolve","res","animationFrames","then","fulfilled","imageSmoothingEnabled","newFrames","setTimeout","deleteFrame","target","parentNode","tagName","previousElementSibling","removeChild","classList","add","copyFrame","newFrame","addNewFrame","insertAdjacentElement","dragElem","copyNode","handleFrameTool","getDragElem","handleDragStart","dataTransfer","effectAllowed","setData","handleDragEnter","handleDragOver","preventDefault","dropEffect","handleDragLeave","remove","handleDragEnd","over","elemCopy","overCopy","currentNumElem","currentNumOver","currentFrameDataElem","currentFrameDataOver","handleMoveFrameTool","selectFrame","getHoverTool","stopHoverTool","hoverFrameTools","addFrameButton","createFrame","handleAddFrameButton","valueFps","changeFpsValue","handleSliderFPS","fullscreenButton","runFullscreenMode","requestFullscreen","outerHeight","handleFullscreenMode","canvasSizeButton","changeCanvasSize","textContent","querySelectorAll","deleteOldFrame","handleCanvasSizeButton","secondaryColorField","arrowChange","changePrimaryColor","changeSecondaryColor","changeColors","handleColorsChange","Tools","tools","pen","paintBucket","colorPicker","eraser","line","rect","circle","dithering","lighten","chooseTools","colorTools","addTooltips","display","getComputedStyle","removeTooltips","handleEventsTools","Keyboard","super","keyboardButton","keyboardModal","closeKeyboard","showModalWindow","closeModalWindow","handleKeyDown","handleKeyboardModalWindow","Export","exportToGIFButton","[object Object]","gif","blob","link","URL","createObjectURL","click","handleExports","exportToGif","keyboard","exp","start"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","/* eslint-disable */\n// gif.js 0.2.0 - https://github.com/jnordberg/gif.js\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.GIF=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError(\"n must be a positive number\");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type===\"error\"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified \"error\" event. ('+er+\")\");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError(\"listener must be a function\");if(!this._events)this._events={};if(this._events.newListener)this.emit(\"newListener\",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error(\"(node) warning: possible EventEmitter memory \"+\"leak detected. %d listeners added. \"+\"Use emitter.setMaxListeners() to increase limit.\",this._events[type].length);if(typeof console.trace===\"function\"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError(\"listener must be a function\");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit(\"removeListener\",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit(\"removeListener\",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key===\"removeListener\")continue;this.removeAllListeners(key)}this.removeAllListeners(\"removeListener\");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg===\"function\"}function isNumber(arg){return typeof arg===\"number\"}function isObject(arg){return typeof arg===\"object\"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],2:[function(require,module,exports){var UA,browser,mode,platform,ua;ua=navigator.userAgent.toLowerCase();platform=navigator.platform.toLowerCase();UA=ua.match(/(opera|ie|firefox|chrome|version)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|version[\\s\\/:]([\\w\\d\\.]+)|$)/)||[null,\"unknown\",0];mode=UA[1]===\"ie\"&&document.documentMode;browser={name:UA[1]===\"version\"?UA[3]:UA[1],version:mode||parseFloat(UA[1]===\"opera\"&&UA[4]?UA[4]:UA[2]),platform:{name:ua.match(/ip(?:ad|od|hone)/)?\"ios\":(ua.match(/(?:webos|android)/)||platform.match(/mac|win|linux/)||[\"other\"])[0]}};browser[browser.name]=true;browser[browser.name+parseInt(browser.version,10)]=true;browser.platform[browser.platform.name]=true;module.exports=browser},{}],3:[function(require,module,exports){var EventEmitter,GIF,browser,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},hasProp={}.hasOwnProperty,indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1},slice=[].slice;EventEmitter=require(\"events\").EventEmitter;browser=require(\"./browser.coffee\");GIF=function(superClass){var defaults,frameDefaults;extend(GIF,superClass);defaults={workerScript:\"gif.worker.js\",workers:2,repeat:0,background:\"#fff\",quality:10,width:null,height:null,transparent:null,debug:false,dither:false};frameDefaults={delay:500,copy:false};function GIF(options){var base,key,value;this.running=false;this.options={};this.frames=[];this.freeWorkers=[];this.activeWorkers=[];this.setOptions(options);for(key in defaults){value=defaults[key];if((base=this.options)[key]==null){base[key]=value}}}GIF.prototype.setOption=function(key,value){this.options[key]=value;if(this._canvas!=null&&(key===\"width\"||key===\"height\")){return this._canvas[key]=value}};GIF.prototype.setOptions=function(options){var key,results,value;results=[];for(key in options){if(!hasProp.call(options,key))continue;value=options[key];results.push(this.setOption(key,value))}return results};GIF.prototype.addFrame=function(image,options){var frame,key;if(options==null){options={}}frame={};frame.transparent=this.options.transparent;for(key in frameDefaults){frame[key]=options[key]||frameDefaults[key]}if(this.options.width==null){this.setOption(\"width\",image.width)}if(this.options.height==null){this.setOption(\"height\",image.height)}if(typeof ImageData!==\"undefined\"&&ImageData!==null&&image instanceof ImageData){frame.data=image.data}else if(typeof CanvasRenderingContext2D!==\"undefined\"&&CanvasRenderingContext2D!==null&&image instanceof CanvasRenderingContext2D||typeof WebGLRenderingContext!==\"undefined\"&&WebGLRenderingContext!==null&&image instanceof WebGLRenderingContext){if(options.copy){frame.data=this.getContextData(image)}else{frame.context=image}}else if(image.childNodes!=null){if(options.copy){frame.data=this.getImageData(image)}else{frame.image=image}}else{throw new Error(\"Invalid image\")}return this.frames.push(frame)};GIF.prototype.render=function(){var i,j,numWorkers,ref;if(this.running){throw new Error(\"Already running\")}if(this.options.width==null||this.options.height==null){throw new Error(\"Width and height must be set prior to rendering\")}this.running=true;this.nextFrame=0;this.finishedFrames=0;this.imageParts=function(){var j,ref,results;results=[];for(i=j=0,ref=this.frames.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){results.push(null)}return results}.call(this);numWorkers=this.spawnWorkers();if(this.options.globalPalette===true){this.renderNextFrame()}else{for(i=j=0,ref=numWorkers;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j){this.renderNextFrame()}}this.emit(\"start\");return this.emit(\"progress\",0)};GIF.prototype.abort=function(){var worker;while(true){worker=this.activeWorkers.shift();if(worker==null){break}this.log(\"killing active worker\");worker.terminate()}this.running=false;return this.emit(\"abort\")};GIF.prototype.spawnWorkers=function(){var j,numWorkers,ref,results;numWorkers=Math.min(this.options.workers,this.frames.length);(function(){results=[];for(var j=ref=this.freeWorkers.length;ref<=numWorkers?j<numWorkers:j>numWorkers;ref<=numWorkers?j++:j--){results.push(j)}return results}).apply(this).forEach(function(_this){return function(i){var worker;_this.log(\"spawning worker \"+i);worker=new Worker(_this.options.workerScript);worker.onmessage=function(event){_this.activeWorkers.splice(_this.activeWorkers.indexOf(worker),1);_this.freeWorkers.push(worker);return _this.frameFinished(event.data)};return _this.freeWorkers.push(worker)}}(this));return numWorkers};GIF.prototype.frameFinished=function(frame){var i,j,ref;this.log(\"frame \"+frame.index+\" finished - \"+this.activeWorkers.length+\" active\");this.finishedFrames++;this.emit(\"progress\",this.finishedFrames/this.frames.length);this.imageParts[frame.index]=frame;if(this.options.globalPalette===true){this.options.globalPalette=frame.globalPalette;this.log(\"global palette analyzed\");if(this.frames.length>2){for(i=j=1,ref=this.freeWorkers.length;1<=ref?j<ref:j>ref;i=1<=ref?++j:--j){this.renderNextFrame()}}}if(indexOf.call(this.imageParts,null)>=0){return this.renderNextFrame()}else{return this.finishRendering()}};GIF.prototype.finishRendering=function(){var data,frame,i,image,j,k,l,len,len1,len2,len3,offset,page,ref,ref1,ref2;len=0;ref=this.imageParts;for(j=0,len1=ref.length;j<len1;j++){frame=ref[j];len+=(frame.data.length-1)*frame.pageSize+frame.cursor}len+=frame.pageSize-frame.cursor;this.log(\"rendering finished - filesize \"+Math.round(len/1e3)+\"kb\");data=new Uint8Array(len);offset=0;ref1=this.imageParts;for(k=0,len2=ref1.length;k<len2;k++){frame=ref1[k];ref2=frame.data;for(i=l=0,len3=ref2.length;l<len3;i=++l){page=ref2[i];data.set(page,offset);if(i===frame.data.length-1){offset+=frame.cursor}else{offset+=frame.pageSize}}}image=new Blob([data],{type:\"image/gif\"});return this.emit(\"finished\",image,data)};GIF.prototype.renderNextFrame=function(){var frame,task,worker;if(this.freeWorkers.length===0){throw new Error(\"No free workers\")}if(this.nextFrame>=this.frames.length){return}frame=this.frames[this.nextFrame++];worker=this.freeWorkers.shift();task=this.getTask(frame);this.log(\"starting frame \"+(task.index+1)+\" of \"+this.frames.length);this.activeWorkers.push(worker);return worker.postMessage(task)};GIF.prototype.getContextData=function(ctx){return ctx.getImageData(0,0,this.options.width,this.options.height).data};GIF.prototype.getImageData=function(image){var ctx;if(this._canvas==null){this._canvas=document.createElement(\"canvas\");this._canvas.width=this.options.width;this._canvas.height=this.options.height}ctx=this._canvas.getContext(\"2d\");ctx.setFill=this.options.background;ctx.fillRect(0,0,this.options.width,this.options.height);ctx.drawImage(image,0,0);return this.getContextData(ctx)};GIF.prototype.getTask=function(frame){var index,task;index=this.frames.indexOf(frame);task={index:index,last:index===this.frames.length-1,delay:frame.delay,transparent:frame.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:browser.name===\"chrome\"};if(frame.data!=null){task.data=frame.data}else if(frame.context!=null){task.data=this.getContextData(frame.context)}else if(frame.image!=null){task.data=this.getImageData(frame.image)}else{throw new Error(\"Invalid frame\")}return task};GIF.prototype.log=function(){var args;args=1<=arguments.length?slice.call(arguments,0):[];if(!this.options.debug){return}return console.log.apply(console,args)};return GIF}(EventEmitter);module.exports=GIF},{\"./browser.coffee\":2,events:1}]},{},[3])(3)});\n\n","class Storage {\n  constructor() {\n    this.currentTool = null;\n    this.colors = {\n      primaryColor: '#acc7cd',\n      secondaryColor: '#e1e6e2',\n    };\n    this.canvas = {\n      canvasContain: document.querySelector('.canvas-contain'),\n      canvasElement: null,\n      canvasSecondary: null,\n      sizeCanvas: 32,\n      sizeRect: null,\n    };\n    this.frame = {\n      countOfFrame: 1,\n      countOfDataFrame: 0,\n      currentFrame: document.querySelector('.frames-contain__wrapper-frame'),\n    };\n    this.framesData = [\n      new Array(this.canvas.sizeCanvas * this.canvas.sizeCanvas).fill(null),\n    ];\n    this.currentFps = '0';\n  }\n}\n\nconst storage = new Storage();\n\nexport default storage;\n","import storage from './storage';\n\nfunction setFramesData(x, y, color) {\n  const currentNum = storage.frame.currentFrame.getAttribute('data-num-frame');\n  const row = y / storage.canvas.sizeRect;\n  const col = x / storage.canvas.sizeRect;\n  const indexPiksel = storage.canvas.sizeCanvas * row + col;\n  if (storage.currentTool === 'eraser') {\n    storage.framesData[currentNum][indexPiksel] = null;\n  } else if (storage.currentTool === 'lighten') {\n    storage.framesData[currentNum][indexPiksel] = [x, y,\n      storage.canvas.sizeRect, color];\n  } else {\n    storage.framesData[currentNum][indexPiksel] = [x, y,\n      storage.canvas.sizeRect, storage.colors.primaryColor];\n  }\n  return indexPiksel;\n}\n\nexport default setFramesData;\n","import storage from './storage';\n\nlet pixelData;\n\nfunction setPixelData(x, y) {\n  const { sizeRect } = storage.canvas;\n  const indexPiksel = storage.canvas.sizeCanvas * y + x;\n  pixelData[indexPiksel] = [x * sizeRect, y * sizeRect,\n    storage.canvas.sizeRect, storage.colors.primaryColor];\n}\n\nfunction drawLine(x1, y1, x2, y2, ctx) {\n  const { sizeRect, sizeCanvas } = storage.canvas;\n  pixelData = new Array(sizeCanvas * sizeCanvas).fill(null);\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const dx1 = Math.abs(dx);\n  const dy1 = Math.abs(dy);\n  let px = 2 * dy1 - dx1;\n  let py = 2 * dx1 - dy1;\n  let x;\n  let y;\n  let xe;\n  let ye;\n  if (dy1 <= dx1) {\n    if (dx >= 0) {\n      x = x1; y = y1; xe = x2;\n    } else {\n      x = x2; y = y2; xe = x1;\n    }\n    ctx.fillRect(x * sizeRect, y * sizeRect, sizeRect, sizeRect);\n    setPixelData(x, y);\n    for (let i = 0; x < xe; i += 1) {\n      x += 1;\n      if (px < 0) {\n        px += 2 * dy1;\n      } else {\n        if ((dx < 0 && dy < 0) || (dx > 0 && dy > 0)) {\n          y += 1;\n        } else {\n          y -= 1;\n        }\n        px += 2 * (dy1 - dx1);\n      }\n      ctx.fillRect(x * sizeRect, y * sizeRect, sizeRect, sizeRect);\n      setPixelData(x, y);\n    }\n  } else {\n    if (dy >= 0) {\n      x = x1; y = y1; ye = y2;\n    } else {\n      x = x2; y = y2; ye = y1;\n    }\n    ctx.fillRect(x * sizeRect, y * sizeRect, sizeRect, sizeRect);\n    setPixelData(x, y);\n    for (let i = 0; y < ye; i += 1) {\n      y += 1;\n      if (py <= 0) {\n        py += 2 * dx1;\n      } else {\n        if ((dx < 0 && dy < 0) || (dx > 0 && dy > 0)) {\n          x += 1;\n        } else {\n          x -= 1;\n        }\n        py += 2 * (dx1 - dy1);\n      }\n      ctx.fillRect(x * sizeRect, y * sizeRect, sizeRect, sizeRect);\n      setPixelData(x, y);\n    }\n  }\n  return pixelData;\n}\n\nexport default drawLine;\n","import storage from './storage';\n\nfunction setNewDataPixels(data) {\n  const currentNum = storage.frame.currentFrame.getAttribute('data-num-frame');\n  storage.framesData[currentNum] = storage.framesData[currentNum].map((elem, i) => {\n    let element;\n    if (data[i] !== null) {\n      element = data[i];\n    } else {\n      element = elem;\n    }\n    return element;\n  });\n}\n\nexport default setNewDataPixels;\n","import storage from '../../components/storage';\nimport setFramesData from '../../components/set-frames-data';\nimport drawLine from '../../components/draw-line';\nimport setNewDataPixels from '../../components/set-new-data-pixels';\n\nlet drawPen = false;\nlet x0 = null;\nlet y0 = null;\n\nfunction fillSpaces(h, v) {\n  if (x0 !== null && y0 !== null && h !== x0 && v !== y0) {\n    const { canvasElement, sizeRect } = storage.canvas;\n    const ctx = canvasElement.getContext('2d');\n    const x1 = h / sizeRect;\n    const y1 = v / sizeRect;\n    const pixelData = drawLine(x0, y0, x1, y1, ctx);\n    setNewDataPixels(pixelData);\n  }\n}\n\nfunction drawPixel(e) {\n  if (storage.currentTool === 'pen') {\n    if (drawPen) {\n      const { canvasElement, sizeRect } = storage.canvas;\n      const { currentFrame } = storage.frame;\n      const ctx = canvasElement.getContext('2d');\n      const ctxFrame = currentFrame.children[0].getContext('2d');\n      for (let h = 0; h < canvasElement.width; h += sizeRect) {\n        for (let v = 0; v < canvasElement.height; v += sizeRect) {\n          if (h + sizeRect > e.offsetX && h <= e.offsetX\n          && v + sizeRect > e.offsetY && v <= e.offsetY) {\n            ctx.fillStyle = storage.colors.primaryColor;\n            fillSpaces(h, v);\n            x0 = h / sizeRect;\n            y0 = v / sizeRect;\n\n            ctx.fillRect(h, v, sizeRect, sizeRect);\n            ctxFrame.drawImage(canvasElement, 0, 0, 150, 150);\n            setFramesData(h, v);\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction handleMouseDown(e) {\n  if (storage.currentTool === 'pen') {\n    drawPen = true;\n  }\n  drawPixel(e);\n}\n\nfunction handleMouseMove(e) {\n  drawPixel(e);\n}\n\nfunction handleMouseUp() {\n  drawPen = false;\n  x0 = null;\n  y0 = null;\n}\n\nfunction addPenTool(canvas) {\n  canvas.addEventListener('mousedown', handleMouseDown);\n  canvas.addEventListener('mousemove', handleMouseMove);\n  canvas.addEventListener('mouseup', handleMouseUp);\n}\n\nexport default addPenTool;\n","import storage from './storage';\n\nfunction drawFinalPixelsOnCanvas(data) {\n  const ctx = storage.canvas.canvasElement.getContext('2d');\n  data.forEach((elem) => {\n    if (elem !== null) {\n      const color = elem[3];\n      ctx.fillStyle = color;\n      ctx.fillRect(elem[0], elem[1], elem[2], elem[2]);\n    }\n  });\n}\n\nexport default drawFinalPixelsOnCanvas;\n","import storage from '../../components/storage';\nimport setNewDataPixels from '../../components/set-new-data-pixels';\nimport drawLine from '../../components/draw-line';\nimport drawFinalPixelsOnCanvas from '../../components/draw-final-line-on-canvas';\n\nlet drawL = false;\nlet x0 = null;\nlet y0 = null;\nlet pixelData;\n\nfunction getCoords(e) {\n  if (drawL) {\n    if (x0 !== null && y0 !== null) {\n      const { sizeRect } = storage.canvas;\n      const x1 = x0;\n      const y1 = y0;\n      const x2 = Math.floor(e.offsetX / sizeRect);\n      const y2 = Math.floor(e.offsetY / sizeRect);\n      const { canvasSecondary } = storage.canvas;\n      const ctx = canvasSecondary.getContext('2d');\n      ctx.clearRect(0, 0, canvasSecondary.width, canvasSecondary.height);\n      pixelData = drawLine(x1, y1, x2, y2, ctx);\n    }\n  }\n}\n\nfunction drawPixel(e) {\n  if (storage.currentTool === 'line') {\n    const { canvasSecondary, sizeRect } = storage.canvas;\n    const ctx = canvasSecondary.getContext('2d');\n    if (drawL) {\n      canvasSecondary.style.zIndex = 15;\n      for (let h = 0; h < canvasSecondary.width; h += sizeRect) {\n        for (let v = 0; v < canvasSecondary.height; v += sizeRect) {\n          if (h + sizeRect > e.offsetX && h <= e.offsetX\n          && v + sizeRect > e.offsetY && v <= e.offsetY) {\n            ctx.fillStyle = storage.colors.primaryColor;\n\n            x0 = h / sizeRect;\n            y0 = v / sizeRect;\n\n            ctx.fillRect(h, v, sizeRect, sizeRect);\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction handleMouseDown(e) {\n  if (storage.currentTool === 'line') {\n    drawL = true;\n    drawPixel(e);\n  }\n}\n\nfunction handleMouseMove(e) {\n  getCoords(e);\n}\n\nfunction handleMouseUp() {\n  if (drawL) {\n    const { canvasSecondary } = storage.canvas;\n    const { currentFrame } = storage.frame;\n    const ctx = canvasSecondary.getContext('2d');\n    const ctxFrame = currentFrame.children[0].getContext('2d');\n    ctx.clearRect(0, 0, canvasSecondary.width, canvasSecondary.height);\n    canvasSecondary.style.zIndex = 5;\n    drawL = false;\n    x0 = null;\n    y0 = null;\n    setNewDataPixels(pixelData);\n    drawFinalPixelsOnCanvas(pixelData);\n    ctxFrame.drawImage(storage.canvas.canvasElement, 0, 0, 150, 150);\n  }\n}\n\nfunction addLineTool(canvas) {\n  canvas.addEventListener('mousedown', handleMouseDown);\n  storage.canvas.canvasSecondary.addEventListener('mousemove', handleMouseMove);\n  storage.canvas.canvasSecondary.addEventListener('mouseup', handleMouseUp);\n}\n\nexport default addLineTool;\n","import storage from '../../components/storage';\nimport setFramesData from '../../components/set-frames-data';\n\nlet drawEraser = false;\n\nfunction deletePixel(e) {\n  if (storage.currentTool === 'eraser') {\n    if (drawEraser) {\n      const { canvasElement, sizeRect } = storage.canvas;\n      const { currentFrame } = storage.frame;\n      const ctx = canvasElement.getContext('2d');\n      const ctxFrame = currentFrame.children[0].getContext('2d');\n      for (let h = 0; h < canvasElement.width; h += sizeRect) {\n        for (let v = 0; v < canvasElement.height; v += sizeRect) {\n          if (h + sizeRect > e.offsetX && h <= e.offsetX\n            && v + sizeRect > e.offsetY && v <= e.offsetY) {\n            ctx.clearRect(h, v, sizeRect, sizeRect);\n            ctxFrame.clearRect(0, 0, 150, 150);\n            ctxFrame.drawImage(canvasElement, 0, 0, 150, 150);\n            setFramesData(h, v);\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction handleMouseDown(e) {\n  if (storage.currentTool === 'eraser') {\n    drawEraser = true;\n  }\n  deletePixel(e);\n}\n\nfunction handleMouseMove(e) {\n  deletePixel(e);\n}\n\nfunction handleMouseUp() {\n  drawEraser = false;\n}\n\nfunction addEraserTool(canvas) {\n  canvas.addEventListener('mousedown', handleMouseDown);\n  canvas.addEventListener('mousemove', handleMouseMove);\n  canvas.addEventListener('mouseup', handleMouseUp);\n}\n\nexport default addEraserTool;\n","function rgbToHex(rgb) {\n  let hex = Number(rgb).toString(16);\n  if (hex.length < 2) {\n    hex = `0${hex}`;\n  }\n  return hex;\n}\n\nfunction fullColorHex(r, g, b) {\n  const red = rgbToHex(r);\n  const green = rgbToHex(g);\n  const blue = rgbToHex(b);\n  return red + green + blue;\n}\n\nexport default fullColorHex;\n","import storage from '../../components/storage';\nimport fullColorHex from '../../components/rgb-to-hex';\n\nconst primaryColorField = document.querySelector('.colors__primary-color');\n\nfunction chooseColor(e) {\n  if (storage.currentTool === 'colorPicker') {\n    const ctx = this.getContext('2d');\n    const imgData = ctx.getImageData(e.offsetX, e.offsetY, 1, 1);\n    const [r, g, b] = imgData.data;\n    storage.colors.primaryColor = `rgb(${r}, ${g}, ${b})`;\n    primaryColorField.value = `#${fullColorHex(r, g, b)}`;\n  }\n}\n\nfunction addColorPickerTool(canvas) {\n  canvas.addEventListener('click', chooseColor);\n}\n\nexport default addColorPickerTool;\n","import storage from '../../components/storage';\nimport setFramesData from '../../components/set-frames-data';\n\nlet startR;\nlet startG;\nlet startB;\nlet startA;\n\nfunction colorPixel(x, y, ctx) {\n  const { sizeRect } = storage.canvas;\n  ctx.fillStyle = storage.colors.primaryColor;\n  ctx.fillRect(x * sizeRect, y * sizeRect, sizeRect, sizeRect);\n  setFramesData(x * sizeRect, y * sizeRect);\n}\n\nfunction matchStartColor(pixelData) {\n  const r = pixelData.data[0];\n  const g = pixelData.data[1];\n  const b = pixelData.data[2];\n  const a = pixelData.data[3];\n\n  return (r === +startR && g === +startG && b === +startB && a === +startA);\n}\n\nfunction getPixelsForFilling(x0, y0) {\n  const { canvasElement, sizeRect } = storage.canvas;\n  const ctx = canvasElement.getContext('2d');\n  let x = x0;\n  let y = y0;\n  const pixelStack = [[x, y]];\n  while (pixelStack.length) {\n    const newPose = pixelStack.pop();\n    [x, y] = newPose;\n    let pixelData = ctx.getImageData(x * sizeRect, y * sizeRect, 1, 1);\n    while (y >= 0 && matchStartColor(pixelData)) {\n      y -= 1;\n      pixelData = ctx.getImageData(x * sizeRect, y * sizeRect, 1, 1);\n    }\n    y += 1;\n    pixelData = ctx.getImageData(x * sizeRect, y * sizeRect, 1, 1);\n    let reachLeft = false;\n    let reachRight = false;\n    while (y < canvasElement.height / sizeRect && matchStartColor(pixelData)) {\n      colorPixel(x, y, ctx);\n      if (x > 0) {\n        if (matchStartColor(ctx.getImageData((x - 1) * sizeRect, y * sizeRect, 1, 1))) {\n          if (!reachLeft) {\n            pixelStack.push([x - 1, y]);\n            reachLeft = true;\n          }\n        } else if (reachLeft) {\n          reachLeft = false;\n        }\n      }\n      if (x < canvasElement.width / sizeRect - 1) {\n        if (matchStartColor(ctx.getImageData((x + 1) * sizeRect, y * sizeRect, 1, 1))) {\n          if (!reachRight) {\n            pixelStack.push([x + 1, y]);\n            reachRight = true;\n          }\n        } else if (reachRight) {\n          reachRight = false;\n        }\n      }\n      y += 1;\n      pixelData = ctx.getImageData(x * sizeRect, y * sizeRect, 1, 1);\n    }\n  }\n}\n\nfunction paintBacket(e) {\n  if (storage.currentTool === 'paintBucket') {\n    const { canvasElement, sizeRect } = storage.canvas;\n    const { currentFrame } = storage.frame;\n    const ctx = canvasElement.getContext('2d');\n    const ctxFrame = currentFrame.children[0].getContext('2d');\n    for (let h = 0; h < canvasElement.width; h += sizeRect) {\n      for (let v = 0; v < canvasElement.height; v += sizeRect) {\n        if (h + sizeRect > e.offsetX && h <= e.offsetX\n          && v + sizeRect > e.offsetY && v <= e.offsetY) {\n          ctx.fillStyle = storage.colors.primaryColor;\n          const x0 = h / sizeRect;\n          const y0 = v / sizeRect;\n          const imgData = ctx.getImageData(h, v, 1, 1);\n          [startR, startG, startB, startA] = imgData.data;\n          getPixelsForFilling(x0, y0);\n          ctxFrame.drawImage(storage.canvas.canvasElement, 0, 0, 150, 150);\n        }\n      }\n    }\n  }\n}\n\nfunction addPaintBacket(canvas) {\n  canvas.addEventListener('click', paintBacket);\n}\n\nexport default addPaintBacket;\n","import storage from '../../components/storage';\nimport setFramesData from '../../components/set-frames-data';\n\nlet startR;\nlet startG;\nlet startB;\nlet startA;\n\nfunction colorPixel(x, y, ctx) {\n  const { sizeRect } = storage.canvas;\n  ctx.fillStyle = storage.colors.primaryColor;\n  ctx.fillRect(x * sizeRect, y * sizeRect, sizeRect, sizeRect);\n  setFramesData(x * sizeRect, y * sizeRect);\n}\n\nfunction matchStartColor(pixelData) {\n  const r = pixelData.data[0];\n  const g = pixelData.data[1];\n  const b = pixelData.data[2];\n  const a = pixelData.data[3];\n\n  return (r === +startR && g === +startG && b === +startB && a === +startA);\n}\n\nfunction getPixelsForFilling() {\n  const { canvasElement, sizeCanvas, sizeRect } = storage.canvas;\n  const ctx = canvasElement.getContext('2d');\n  for (let x = 0; x < sizeCanvas; x += 1) {\n    for (let y = 0; y < sizeCanvas; y += 1) {\n      const pixelData = ctx.getImageData(x * sizeRect, y * sizeRect, 1, 1);\n      if (matchStartColor(pixelData)) {\n        colorPixel(x, y, ctx);\n      }\n    }\n  }\n}\n\nfunction paintSameColor(e) {\n  if (storage.currentTool === 'paintSameColor') {\n    const { canvasElement, sizeRect } = storage.canvas;\n    const { currentFrame } = storage.frame;\n    const ctx = canvasElement.getContext('2d');\n    const ctxFrame = currentFrame.children[0].getContext('2d');\n    for (let h = 0; h < canvasElement.width; h += sizeRect) {\n      for (let v = 0; v < canvasElement.height; v += sizeRect) {\n        if (h + sizeRect > e.offsetX && h <= e.offsetX\n          && v + sizeRect > e.offsetY && v <= e.offsetY) {\n          ctx.fillStyle = storage.colors.primaryColor;\n          const imgData = ctx.getImageData(h, v, 1, 1);\n          [startR, startG, startB, startA] = imgData.data;\n          getPixelsForFilling();\n          ctxFrame.drawImage(storage.canvas.canvasElement, 0, 0, 150, 150);\n        }\n      }\n    }\n  }\n}\n\nfunction addPaintSameColor(canvas) {\n  canvas.addEventListener('click', paintSameColor);\n}\n\nexport default addPaintSameColor;\n","import storage from '../../components/storage';\nimport setNewDataPixels from '../../components/set-new-data-pixels';\nimport drawFinalPixelsOnCanvas from '../../components/draw-final-line-on-canvas';\n\nlet drawRec = false;\nlet x0 = null;\nlet y0 = null;\nlet pixelData;\n\nfunction setPixelData(x, y) {\n  const { sizeRect } = storage.canvas;\n  const indexPiksel = storage.canvas.sizeCanvas * y + x;\n  pixelData[indexPiksel] = [x * sizeRect, y * sizeRect,\n    storage.canvas.sizeRect, storage.colors.primaryColor];\n}\n\nfunction drawRect(x1, y1, x2, y2, ctx) {\n  const { sizeRect, sizeCanvas } = storage.canvas;\n  pixelData = new Array(sizeCanvas * sizeCanvas).fill(null);\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  let startX;\n  let startY;\n  let endX;\n  let endY;\n  if (dx >= 0 && dy >= 0) {\n    startX = x1;\n    endX = x2;\n    if (dy >= 0) {\n      startY = y1;\n      endY = y2;\n    } else if (dx < 0) {\n      startY = y2;\n      endY = y1;\n    }\n  } else if (dx < 0 && dy < 0) {\n    startX = x2;\n    endX = x1;\n    if (dy >= 0) {\n      startY = y1;\n      endY = y2;\n    } else if (dy < 0) {\n      startY = y2;\n      endY = y1;\n    }\n  }\n  for (let x = startX; x <= endX; x += 1) {\n    ctx.fillRect(x * sizeRect, y1 * sizeRect, sizeRect, sizeRect);\n    ctx.fillRect(x * sizeRect, y2 * sizeRect, sizeRect, sizeRect);\n    setPixelData(x, y1);\n    setPixelData(x, y2);\n  }\n  for (let y = startY; y <= endY; y += 1) {\n    ctx.fillRect(x1 * sizeRect, y * sizeRect, sizeRect, sizeRect);\n    ctx.fillRect(x2 * sizeRect, y * sizeRect, sizeRect, sizeRect);\n    setPixelData(x1, y);\n    setPixelData(x2, y);\n  }\n}\n\nfunction getCoords(e) {\n  if (drawRec) {\n    if (x0 !== null && y0 !== null) {\n      const { sizeRect } = storage.canvas;\n      const x1 = x0;\n      const y1 = y0;\n      const x2 = Math.floor(e.offsetX / sizeRect);\n      const y2 = Math.floor(e.offsetY / sizeRect);\n      const { canvasSecondary } = storage.canvas;\n      const ctx = canvasSecondary.getContext('2d');\n      ctx.clearRect(0, 0, canvasSecondary.width, canvasSecondary.height);\n      drawRect(x1, y1, x2, y2, ctx);\n    }\n  }\n}\n\nfunction drawPixel(e) {\n  if (storage.currentTool === 'rectangle') {\n    if (drawRec) {\n      const { canvasSecondary, sizeRect } = storage.canvas;\n      const ctx = canvasSecondary.getContext('2d');\n      canvasSecondary.style.zIndex = 15;\n      for (let h = 0; h < canvasSecondary.width; h += sizeRect) {\n        for (let v = 0; v < canvasSecondary.height; v += sizeRect) {\n          if (h + sizeRect > e.offsetX && h <= e.offsetX\n            && v + sizeRect > e.offsetY && v <= e.offsetY) {\n            ctx.fillStyle = storage.colors.primaryColor;\n\n            x0 = h / sizeRect;\n            y0 = v / sizeRect;\n\n            ctx.fillRect(h, v, sizeRect, sizeRect);\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction handleMouseDown(e) {\n  if (storage.currentTool === 'rectangle') {\n    drawRec = true;\n    drawPixel(e);\n  }\n}\n\nfunction handleMouseMove(e) {\n  getCoords(e);\n}\n\nfunction handleMouseUp() {\n  if (storage.currentTool === 'rectangle') {\n    const { canvasSecondary } = storage.canvas;\n    const { currentFrame } = storage.frame;\n    const ctx = canvasSecondary.getContext('2d');\n    const ctxFrame = currentFrame.children[0].getContext('2d');\n    ctx.clearRect(0, 0, canvasSecondary.width, canvasSecondary.height);\n    canvasSecondary.style.zIndex = 5;\n    drawRec = false;\n    x0 = null;\n    y0 = null;\n    setNewDataPixels(pixelData);\n    drawFinalPixelsOnCanvas(pixelData);\n    ctxFrame.drawImage(storage.canvas.canvasElement, 0, 0, 150, 150);\n  }\n}\n\nfunction addRectangleTool(canvas) {\n  canvas.addEventListener('mousedown', handleMouseDown);\n  storage.canvas.canvasSecondary.addEventListener('mousemove', handleMouseMove);\n  storage.canvas.canvasSecondary.addEventListener('mouseup', handleMouseUp);\n}\n\nexport default addRectangleTool;\n","import storage from '../../components/storage';\nimport setNewDataPixels from '../../components/set-new-data-pixels';\nimport drawFinalPixelsOnCanvas from '../../components/draw-final-line-on-canvas';\n\nlet drawCir = false;\nlet x0 = null;\nlet y0 = null;\nlet pixelData;\n\nfunction setPixelData(x, y) {\n  const { sizeRect } = storage.canvas;\n  const indexPiksel = storage.canvas.sizeCanvas * y + x;\n  pixelData[indexPiksel] = [x * sizeRect, y * sizeRect,\n    storage.canvas.sizeRect, storage.colors.primaryColor];\n}\n\nfunction putPixel(x, y) {\n  const { canvasSecondary, sizeRect } = storage.canvas;\n  const ctx = canvasSecondary.getContext('2d');\n  ctx.fillRect(x * sizeRect, y * sizeRect, sizeRect, sizeRect);\n  setPixelData(x, y);\n}\n\nfunction drawCircle(x1, y1) {\n  const xC = Math.round((x0 + x1) / 2);\n  const yC = Math.round((y0 + y1) / 2);\n  const evenX = (x0 + x1) % 2;\n  const evenY = (y0 + y1) % 2;\n  const rX = x1 - xC;\n  const rY = y1 - yC;\n\n  for (let x = x0; x <= xC; x += 1) {\n    const angle = Math.acos((x - xC) / rX);\n    const y = Math.round(rY * Math.sin(angle) + yC);\n    putPixel(x - evenX, y);\n    putPixel(x - evenX, 2 * yC - y - evenY);\n    putPixel(2 * xC - x, y);\n    putPixel(2 * xC - x, 2 * yC - y - evenY);\n  }\n  for (let y = y0; y <= yC; y += 1) {\n    const angle = Math.asin((y - yC) / rY);\n    const x = Math.round(rX * Math.cos(angle) + xC);\n    putPixel(x, y - evenY);\n    putPixel(2 * xC - x - evenX, y - evenY);\n    putPixel(x, 2 * yC - y);\n    putPixel(2 * xC - x - evenX, 2 * yC - y);\n  }\n}\n\nfunction getCoords(e) {\n  if (x0 !== null && y0 !== null) {\n    const { canvasSecondary, sizeRect, sizeCanvas } = storage.canvas;\n    pixelData = new Array(sizeCanvas * sizeCanvas).fill(null);\n    const x1 = Math.floor(e.offsetX / sizeRect);\n    const y1 = Math.floor(e.offsetY / sizeRect);\n    const ctx = canvasSecondary.getContext('2d');\n    ctx.fillStyle = storage.colors.primaryColor;\n    ctx.clearRect(0, 0, canvasSecondary.width, canvasSecondary.height);\n    drawCircle(x1, y1);\n  }\n}\n\nfunction getStartCoords(e) {\n  const { canvasSecondary, sizeRect } = storage.canvas;\n  canvasSecondary.style.zIndex = 15;\n  for (let h = 0; h < canvasSecondary.width; h += sizeRect) {\n    for (let v = 0; v < canvasSecondary.height; v += sizeRect) {\n      if (h + sizeRect > e.offsetX && h <= e.offsetX\n        && v + sizeRect > e.offsetY && v <= e.offsetY) {\n        x0 = h / sizeRect;\n        y0 = v / sizeRect;\n      }\n    }\n  }\n}\n\nfunction handleMouseDown(e) {\n  if (storage.currentTool === 'circle') {\n    drawCir = true;\n    getStartCoords(e);\n  }\n}\n\nfunction handleMouseMove(e) {\n  if (storage.currentTool === 'circle') {\n    if (drawCir) {\n      getCoords(e);\n    }\n  }\n}\n\nfunction handleMouseUp() {\n  if (drawCir) {\n    const { canvasSecondary } = storage.canvas;\n    const { currentFrame } = storage.frame;\n    const ctx = canvasSecondary.getContext('2d');\n    const ctxFrame = currentFrame.children[0].getContext('2d');\n    ctx.clearRect(0, 0, canvasSecondary.width, canvasSecondary.height);\n    canvasSecondary.style.zIndex = 5;\n    drawCir = false;\n    x0 = null;\n    y0 = null;\n    window.console.log(pixelData);\n    setNewDataPixels(pixelData);\n    drawFinalPixelsOnCanvas(pixelData);\n    ctxFrame.drawImage(storage.canvas.canvasElement, 0, 0, 150, 150);\n  }\n}\n\nfunction addCircleTool(canvas) {\n  canvas.addEventListener('mousedown', handleMouseDown);\n  storage.canvas.canvasSecondary.addEventListener('mousemove', handleMouseMove);\n  storage.canvas.canvasSecondary.addEventListener('mouseup', handleMouseUp);\n}\n\nexport default addCircleTool;\n","import storage from '../../components/storage';\nimport setFramesData from '../../components/set-frames-data';\n\nlet drawDith = false;\n\nfunction drawPixel(e) {\n  if (storage.currentTool === 'dithering') {\n    if (drawDith) {\n      const { canvasElement, sizeRect } = storage.canvas;\n      const { currentFrame } = storage.frame;\n      const ctx = canvasElement.getContext('2d');\n      const ctxFrame = currentFrame.children[0].getContext('2d');\n      for (let h = 0; h < canvasElement.width; h += sizeRect) {\n        for (let v = 0; v < canvasElement.height; v += sizeRect) {\n          if (h + sizeRect > e.offsetX && h <= e.offsetX\n          && v + sizeRect > e.offsetY && v <= e.offsetY) {\n            const xEven = ((h / sizeRect) % 2) === 0;\n            const yEven = ((v / sizeRect) % 2) === 0;\n            if ((xEven && !yEven) || (!xEven && yEven)) {\n              ctx.fillStyle = storage.colors.primaryColor;\n\n              ctx.fillRect(h, v, sizeRect, sizeRect);\n              ctxFrame.drawImage(canvasElement, 0, 0, 150, 150);\n              setFramesData(h, v);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction handleMouseDown(e) {\n  if (storage.currentTool === 'dithering') {\n    drawDith = true;\n  }\n  drawPixel(e);\n}\n\nfunction handleMouseMove(e) {\n  drawPixel(e);\n}\n\nfunction handleMouseUp() {\n  drawDith = false;\n}\n\n\nfunction addDitheringTool(canvas) {\n  canvas.addEventListener('mousedown', handleMouseDown);\n  canvas.addEventListener('mousemove', handleMouseMove);\n  canvas.addEventListener('mouseup', handleMouseUp);\n}\n\nexport default addDitheringTool;\n","import storage from '../../components/storage';\nimport setFramesData from '../../components/set-frames-data';\n\nlet ligh = false;\n\nfunction rgbToHsl(data) {\n  let [r, g, b] = data;\n  r /= 255;\n  g /= 255;\n  b /= 255;\n  const cmin = Math.min(r, g, b);\n  const cmax = Math.max(r, g, b);\n  const delta = cmax - cmin;\n  let h = 0;\n  let s = 0;\n  let l = 0;\n  if (delta === 0) {\n    h = 0;\n  } else if (cmax === r) {\n    h = ((g - b) / delta) % 6;\n  } else if (cmax === g) {\n    h = (b - r) / delta + 2;\n  } else {\n    h = (r - g) / delta + 4;\n  }\n\n  h = Math.round(h * 60);\n\n  if (h < 0) {\n    h += 360;\n  }\n\n  l = (cmax + cmin) / 2;\n\n  s = delta === 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));\n\n  s = +(s * 100).toFixed(1);\n  l = +(l * 100).toFixed(1);\n\n  return [h, s, l];\n}\n\nfunction hslToRgb(h, s, l) {\n  const s1 = s / 100;\n  const l1 = l / 100;\n  const c = (1 - Math.abs(2 * l1 - 1)) * s1;\n  const x = c * (1 - Math.abs(((h / 60) % 2) - 1));\n  const m = l1 - c / 2;\n  let r = 0;\n  let g = 0;\n  let b = 0;\n  if (h >= 0 && h < 60) {\n    r = c; g = x; b = 0;\n  } else if (h >= 60 && h < 120) {\n    r = x; g = c; b = 0;\n  } else if (h >= 120 && h < 180) {\n    r = 0; g = c; b = x;\n  } else if (h >= 180 && h < 240) {\n    r = 0; g = x; b = c;\n  } else if (h >= 240 && h < 300) {\n    r = x; g = 0; b = c;\n  } else if (h >= 300 && h < 360) {\n    r = c; g = 0; b = x;\n  }\n  r = Math.round((r + m) * 255);\n  g = Math.round((g + m) * 255);\n  b = Math.round((b + m) * 255);\n\n  return `rgb(${r}, ${g}, ${b})`;\n}\n\nfunction getNewLightenColor(imgData) {\n  const [h, s, l] = rgbToHsl(imgData.data);\n  let l1 = l + 1;\n  if (l1 > 100) {\n    l1 = 100;\n  }\n  const color = hslToRgb(h, s, l1);\n  return color;\n}\n\nfunction getLighten(e) {\n  if (ligh) {\n    const { canvasElement, sizeRect } = storage.canvas;\n    const { currentFrame } = storage.frame;\n    const ctx = canvasElement.getContext('2d');\n    const ctxFrame = currentFrame.children[0].getContext('2d');\n    for (let h = 0; h < canvasElement.width; h += sizeRect) {\n      for (let v = 0; v < canvasElement.height; v += sizeRect) {\n        if (h + sizeRect > e.offsetX && h <= e.offsetX\n          && v + sizeRect > e.offsetY && v <= e.offsetY) {\n          const imgData = ctx.getImageData(h, v, 1, 1);\n          if (imgData.data[3] !== 0) {\n            const newColor = getNewLightenColor(imgData);\n            ctx.fillStyle = newColor;\n            ctx.fillRect(h, v, sizeRect, sizeRect);\n            ctxFrame.drawImage(canvasElement, 0, 0, 150, 150);\n            setFramesData(h, v, newColor);\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction handleMouseDown(e) {\n  if (storage.currentTool === 'lighten') {\n    ligh = true;\n    getLighten(e);\n  }\n}\n\nfunction handleMouseMove(e) {\n  getLighten(e);\n}\n\nfunction handleMouseUp() {\n  if (storage.currentTool === 'lighten') {\n    ligh = false;\n  }\n}\n\nfunction addLightenTool(canvas) {\n  canvas.addEventListener('mousedown', handleMouseDown);\n  canvas.addEventListener('mousemove', handleMouseMove);\n  canvas.addEventListener('mouseup', handleMouseUp);\n}\n\nexport default addLightenTool;\n","import storage from '../../components/storage';\n\nconst coordsInfo = document.querySelector('.info__coords');\n\nfunction getCoords(e) {\n  const { canvasElement, sizeRect } = storage.canvas;\n  for (let h = 0; h < canvasElement.width; h += sizeRect) {\n    for (let v = 0; v < canvasElement.height; v += sizeRect) {\n      if (h + sizeRect > e.offsetX && h <= e.offsetX\n          && v + sizeRect > e.offsetY && v <= e.offsetY) {\n        coordsInfo.innerHTML = `[${h / sizeRect}:${v / sizeRect}]`;\n      }\n    }\n  }\n}\n\nfunction removeCoords() {\n  coordsInfo.innerHTML = '';\n}\n\nfunction showCoordsOfPixel(canvas) {\n  canvas.addEventListener('mousemove', getCoords);\n  canvas.addEventListener('mouseleave', removeCoords);\n}\n\nexport default showCoordsOfPixel;\n","import storage from '../../components/storage';\nimport addPenTool from '../tools/pen-tool';\nimport addLineTool from '../tools/line-tool';\nimport addEraserTool from '../tools/eraser-tool';\nimport addColorPickerTool from '../tools/choose-picker-tool';\nimport addPaintBacket from '../tools/paint-backet-tool';\nimport addPaintSameColor from '../tools/paint-bucket-same-color-tool';\nimport addRectangleTool from '../tools/rectangle-tool';\nimport addCircleTool from '../tools/circle-tool';\nimport addDitheringTool from '../tools/dithering-tool';\nimport addLightenTool from '../tools/lighten-tool';\nimport showCoordsOfPixel from '../info-field/info';\n\nclass Canvas {\n  constructor(pixels) {\n    this.canvasCopy = document.querySelector('.canvas-contain__drawing-canvas');\n    this.canvasSecondary = document.querySelector('.canvas-contain__secondary-canvas');\n    this.canvas = this.canvasCopy.cloneNode();\n    this.sizeCanvas = pixels;\n    this.sizeRect = Math.floor(800 / this.sizeCanvas);\n  }\n}\n\nfunction addEventsOnCanvas(canvas) {\n  addPenTool(canvas);\n  addLineTool(canvas);\n  addEraserTool(canvas);\n  addColorPickerTool(canvas);\n  addPaintBacket(canvas);\n  addPaintSameColor(canvas);\n  addRectangleTool(canvas);\n  addCircleTool(canvas);\n  addDitheringTool(canvas);\n  addLightenTool(canvas);\n  showCoordsOfPixel(canvas);\n}\n\nfunction createCanvas(sizeCanvas) {\n  const oldCanvas = document.querySelector('.canvas-contain__drawing-canvas');\n  const size = new Canvas(sizeCanvas);\n  const { canvas, canvasSecondary } = size;\n  canvas.width = size.sizeRect * size.sizeCanvas;\n  canvas.height = canvas.width;\n  canvasSecondary.width = canvas.width;\n  canvasSecondary.height = canvas.width;\n  storage.canvas.canvasSecondary = canvasSecondary;\n  storage.canvas.canvasElement = canvas;\n  storage.canvas.sizeRect = size.sizeRect;\n  storage.canvas.sizeCanvas = sizeCanvas;\n  addEventsOnCanvas(canvas);\n  storage.canvas.canvasContain.replaceChild(canvas, oldCanvas);\n}\n\nexport default createCanvas;\n","class Frame {\n  constructor(numData, numOfFrame) {\n    this.frameCopy = document.querySelector('.frames-contain__wrapper-frame');\n    this.frameContain = this.frameCopy.cloneNode(true);\n    [this.frameCanvas] = this.frameContain.children;\n    this.numDataOfFrame = numData;\n    [, this.numFrameTool] = this.frameContain.children;\n    this.numFrameTool.innerHTML = numOfFrame;\n  }\n}\n\nexport default Frame;\n","import storage from './storage';\n\nfunction drawCanvas(elem) {\n  if (elem !== null) {\n    const context = storage.canvas.canvasElement.getContext('2d');\n    const color = elem[3];\n    context.fillStyle = color;\n    context.fillRect(elem[0], elem[1], elem[2], elem[2]);\n  }\n}\n\nexport default drawCanvas;\n","function changeNum(e, i) {\n  e.children[1].innerHTML = i + 1;\n  e.setAttribute('data-num-frame', i);\n}\n\nfunction changeNumOfFrames() {\n  let frames = document.getElementsByClassName('frames-contain__wrapper-frame');\n  frames = Array.prototype.slice.call(frames);\n\n  frames.map((elem, i) => changeNum(elem, i));\n}\n\nexport default changeNumOfFrames;\n","import storage from '../../components/storage';\n\nconst preview = document.querySelector('.preview-contain__preview');\nconst ctxPreview = preview.getContext('2d');\nconst sliderFps = document.querySelector('.preview-contain__fps-block--fps-slider');\n\nasync function createPreviewAnimation(fps) {\n  const ms = 1000 / fps;\n  let frames = document.getElementsByClassName('frames-contain__wrapper-frame');\n  frames = Array.prototype.slice.call(frames);\n  let indexFrame = 0;\n\n  const frameOfAnimation = new Promise((resolve) => {\n    let res;\n    if (+fps !== 0) {\n      res = true;\n    } else if (+fps === 0) {\n      res = false;\n    }\n    resolve(res);\n  });\n\n  function animationFrames() {\n    frameOfAnimation\n      .then((fulfilled) => {\n        if (fulfilled) {\n          ctxPreview.clearRect(0, 0, preview.width, preview.height);\n          ctxPreview.imageSmoothingEnabled = false;\n          ctxPreview.drawImage(frames[indexFrame].children[0], 0, 0, preview.width, preview.height);\n          indexFrame += 1;\n          if (indexFrame === frames.length) {\n            indexFrame = 0;\n          }\n        } else if (!fulfilled) {\n          ctxPreview.clearRect(0, 0, preview.width, preview.height);\n          ctxPreview.drawImage(storage.canvas.canvasElement, 0, 0, preview.width, preview.height);\n        }\n      });\n    const newFrames = document.getElementsByClassName('frames-contain__wrapper-frame');\n    if (frames.length === newFrames.length && fps === sliderFps.value) {\n      setTimeout(animationFrames, ms);\n    }\n  }\n\n  await animationFrames();\n}\n\nexport default createPreviewAnimation;\n","import storage from '../../components/storage';\nimport createCanvas from '../canvas/canvas';\nimport drawCanvas from '../../components/draw-canvas';\nimport changeNumOfFrames from '../../components/change-num-of-frames';\nimport createPreviewAnimation from '../preview/preview-animation';\n\nfunction deleteFrame(e) {\n  let { target } = e;\n  do {\n    target = target.parentNode;\n  } while (target.tagName !== 'DIV');\n\n  let currentNum = target.getAttribute('data-num-frame');\n  storage.framesData.splice(currentNum, 1);\n  window.console.log(storage.framesData);\n\n  if (target === storage.frame.currentFrame) {\n    storage.frame.currentFrame = target.previousElementSibling;\n    target.parentNode.removeChild(target);\n    storage.frame.currentFrame.classList.add('selected');\n\n    createCanvas(storage.canvas.sizeCanvas);\n    currentNum = storage.frame.currentFrame.getAttribute('data-num-frame');\n    storage.framesData[currentNum].map(elem => drawCanvas(elem));\n  } else {\n    target.parentNode.removeChild(target);\n  }\n  storage.frame.countOfFrame -= 1;\n  storage.frame.countOfDataFrame -= 1;\n  changeNumOfFrames();\n  createPreviewAnimation(storage.currentFps);\n}\n\nexport default deleteFrame;\n","import storage from '../../components/storage';\nimport createCanvas from '../canvas/canvas';\n// eslint-disable-next-line import/no-cycle\nimport addNewFrame from '../../components/create-new-frame';\nimport drawCanvas from '../../components/draw-canvas';\nimport changeNumOfFrames from '../../components/change-num-of-frames';\nimport createPreviewAnimation from '../preview/preview-animation';\n\nfunction copyFrame(e) {\n  let { target } = e;\n  do {\n    target = target.parentNode;\n  } while (target.tagName !== 'DIV');\n\n  storage.frame.countOfDataFrame += 1;\n  storage.frame.countOfFrame += 1;\n\n  createCanvas(storage.canvas.sizeCanvas);\n\n  const currentNum = target.getAttribute('data-num-frame');\n  storage.framesData[currentNum].map(elem => drawCanvas(elem));\n\n  const newFrame = target.cloneNode(true);\n  const ctxNewFrame = newFrame.children[0].getContext('2d');\n  ctxNewFrame.drawImage(storage.canvas.canvasElement, 0, 0, 150, 150);\n  newFrame.children[4].addEventListener('click', copyFrame);\n\n  addNewFrame(newFrame);\n  storage.framesData[storage.frame.countOfDataFrame] = new Array(storage.canvas.sizeCanvas\n    * storage.canvas.sizeCanvas).fill(null).map((elem, i) => {\n    const element = storage.framesData[currentNum][i];\n    return element;\n  });\n\n  target.insertAdjacentElement('afterend', newFrame);\n  changeNumOfFrames();\n  createPreviewAnimation(storage.currentFps);\n}\n\nexport default copyFrame;\n","import storage from '../../components/storage';\nimport drawCanvas from '../../components/draw-canvas';\n// eslint-disable-next-line import/no-cycle\nimport handleFrameTool from './handle-frame-tool';\nimport createCanvas from '../canvas/canvas';\nimport changeNumOfFrames from '../../components/change-num-of-frames';\n\nlet dragElem = null;\n\nfunction copyNode(element) {\n  const elem = element.cloneNode(true);\n\n  createCanvas(storage.canvas.sizeCanvas);\n  const currentNum = elem.getAttribute('data-num-frame');\n  storage.framesData[currentNum].map(e => drawCanvas(e));\n\n  const ctxNewFrame = elem.children[0].getContext('2d');\n  ctxNewFrame.drawImage(storage.canvas.canvasElement, 0, 0, 150, 150);\n  handleFrameTool(elem);\n  return elem;\n}\n\nfunction getDragElem(e) {\n  let { target } = e;\n  do {\n    target = target.parentNode;\n  } while (target.tagName !== 'DIV');\n\n  dragElem = target;\n}\n\nfunction handleDragStart(e) {\n  window.console.log(dragElem);\n  e.dataTransfer.effectAllowed = 'move';\n  e.dataTransfer.setData('text/html', this.innerHTML);\n}\n\nfunction handleDragEnter() {\n  window.console.log(dragElem);\n  window.console.log(this);\n  if (dragElem !== this) {\n    this.classList.add('over');\n  }\n}\n\nfunction handleDragOver(e) {\n  if (e.preventDefault) {\n    e.preventDefault();\n  }\n  e.dataTransfer.dropEffect = 'move';\n  return false;\n}\n\nfunction handleDragLeave(e) {\n  e.target.classList.remove('over');\n}\n\nfunction handleDragEnd() {\n  const over = document.querySelector('.over');\n\n  let frames = document.getElementsByClassName('frames-contain__wrapper-frame');\n  frames = Array.prototype.slice.call(frames);\n\n  frames.map((elem) => {\n    if (dragElem === elem && over !== null) {\n      const selected = document.querySelector('.selected');\n      selected.classList.remove('selected');\n\n      over.classList.remove('over');\n      over.classList.add('selected');\n\n      const elemCopy = copyNode(elem);\n      const overCopy = copyNode(over);\n      elem.parentNode.replaceChild(overCopy, elem);\n      over.parentNode.replaceChild(elemCopy, over);\n\n      const currentNumElem = elemCopy.getAttribute('data-num-frame');\n      const currentNumOver = overCopy.getAttribute('data-num-frame');\n\n      const currentFrameDataElem = new Array(storage.canvas.sizeCanvas\n        * storage.canvas.sizeCanvas).fill(null).map((e, i) => {\n        const element = storage.framesData[currentNumOver][i];\n        return element;\n      });\n      const currentFrameDataOver = new Array(storage.canvas.sizeCanvas\n        * storage.canvas.sizeCanvas).fill(null).map((e, i) => {\n        const element = storage.framesData[currentNumElem][i];\n        return element;\n      });\n\n      storage.framesData[currentNumElem] = currentFrameDataElem;\n      storage.framesData[currentNumOver] = currentFrameDataOver;\n\n      storage.frame.currentFrame = overCopy;\n    }\n    return elem;\n  });\n  changeNumOfFrames();\n}\n\nfunction handleMoveFrameTool(frame) {\n  frame.children[3].addEventListener('mousedown', getDragElem);\n  frame.addEventListener('dragstart', handleDragStart);\n  frame.addEventListener('dragenter', handleDragEnter);\n  frame.addEventListener('dragover', handleDragOver);\n  frame.addEventListener('dragleave', handleDragLeave);\n  frame.addEventListener('dragend', handleDragEnd);\n}\n\nexport default handleMoveFrameTool;\n","import storage from './storage';\nimport createCanvas from '../screens/canvas/canvas';\nimport drawCanvas from './draw-canvas';\n\nfunction selectFrame(event) {\n  const e = event;\n  if (e.target.tagName === 'CANVAS') {\n    storage.frame.currentFrame.classList.remove('selected');\n    this.classList.add('selected');\n    storage.frame.currentFrame = this;\n    createCanvas(storage.canvas.sizeCanvas);\n    const currentNum = storage.frame.currentFrame.getAttribute('data-num-frame');\n\n    storage.framesData[currentNum].map(elem => drawCanvas(elem));\n  }\n}\n\nexport default selectFrame;\n","function getHoverTool() {\n  const tools = [this.children[2], this.children[3], this.children[4]];\n  tools.map(elem => elem.classList.add('visible'));\n}\n\nfunction stopHoverTool() {\n  const tools = [this.children[2], this.children[3], this.children[4]];\n  tools.map(elem => elem.classList.remove('visible'));\n}\n\nfunction hoverFrameTools(frame) {\n  frame.addEventListener('mousemove', getHoverTool);\n  frame.addEventListener('mouseleave', stopHoverTool);\n}\n\nexport default hoverFrameTools;\n","/* eslint-disable import/no-cycle */\nimport deleteFrame from './delete-frame-tool';\nimport copyFrame from './copy-frame-tool';\nimport handleMoveFrameTool from './move-frame-tool';\nimport selectFrame from '../../components/select-frames';\nimport hoverFrameTools from '../../components/hover-frame-tools';\n\nfunction handleFrameTool(frame) {\n  frame.children[2].addEventListener('click', deleteFrame);\n  frame.children[4].addEventListener('click', copyFrame);\n  handleMoveFrameTool(frame);\n  hoverFrameTools(frame);\n  frame.addEventListener('click', selectFrame);\n}\n\nexport default handleFrameTool;\n","import storage from './storage';\n// eslint-disable-next-line import/no-cycle\nimport handleFrameTool from '../screens/frames/handle-frame-tool';\n\nfunction addNewFrame(frame) {\n  storage.framesData[storage.frame.countOfDataFrame] = new Array(storage.canvas.sizeCanvas\n    * storage.canvas.sizeCanvas).fill(null);\n  const newFrame = frame;\n  newFrame.setAttribute('data-num-frame', storage.frame.countOfDataFrame);\n  newFrame.children[1].innerHTML = storage.frame.countOfFrame;\n  storage.frame.currentFrame.classList.remove('selected');\n  storage.frame.currentFrame = newFrame;\n  storage.frame.currentFrame.classList.add('selected');\n  handleFrameTool(storage.frame.currentFrame);\n}\n\nexport default addNewFrame;\n","import storage from '../../components/storage';\nimport Frame from './frames';\nimport createCanvas from '../canvas/canvas';\nimport addNewFrame from '../../components/create-new-frame';\nimport createPreviewAnimation from '../preview/preview-animation';\n\nconst addFrameButton = document.querySelector('.frames-contain__frame-add');\n\nfunction createFrame() {\n  storage.frame.countOfDataFrame += 1;\n  storage.frame.countOfFrame += 1;\n  const newFrame = new Frame(storage.frame.countOfDataFrame, storage.frame.countOfFrame);\n  createCanvas(storage.canvas.sizeCanvas);\n  addNewFrame(newFrame.frameContain);\n  addFrameButton.insertAdjacentElement('beforebegin', newFrame.frameContain);\n  createPreviewAnimation(storage.currentFps);\n}\n\nfunction handleAddFrameButton() {\n  addFrameButton.addEventListener('click', createFrame);\n}\n\nexport default handleAddFrameButton;\n","import storage from '../../components/storage';\nimport createPreviewAnimation from './preview-animation';\n\nconst sliderFps = document.querySelector('.preview-contain__fps-block--fps-slider');\nconst valueFps = document.querySelector('.fps-value');\n\nfunction changeFpsValue() {\n  if (sliderFps.value !== valueFps.value) {\n    const { value } = sliderFps;\n    valueFps.value = value;\n    valueFps.innerHTML = value;\n    storage.currentFps = value;\n    createPreviewAnimation(storage.currentFps);\n  }\n}\n\nfunction handleSliderFPS() {\n  sliderFps.addEventListener('mousemove', changeFpsValue);\n}\n\nexport default handleSliderFPS;\n","const preview = document.querySelector('.preview-contain__preview');\nconst fullscreenButton = document.querySelector('.preview-contain__fullscreen');\n\nfunction runFullscreenMode() {\n  preview.requestFullscreen();\n  preview.height = window.outerHeight;\n  preview.width = preview.height;\n}\n\nfunction handleFullscreenMode() {\n  fullscreenButton.addEventListener('click', runFullscreenMode);\n}\n\nexport default handleFullscreenMode;\n","import createCanvas from './canvas';\nimport deleteFrame from '../frames/delete-frame-tool';\nimport storage from '../../components/storage';\n\nconst canvasSizeButton = document.querySelector('.canvas-size');\n\nfunction deleteOldFrame(size) {\n  let frames = document.querySelectorAll('.frames-contain__wrapper-frame');\n  frames = Array.prototype.slice.call(frames);\n\n  frames.map((elem, i) => {\n    if (i === 0) {\n      const cvs = elem.children[0];\n      const ctx = cvs.getContext('2d');\n      ctx.clearRect(0, 0, 150, 150);\n      storage.framesData[i] = new Array(size * size).fill(null);\n      return elem;\n    }\n    const event = {\n      target: elem.children[0],\n    };\n    deleteFrame(event);\n    return elem;\n  });\n}\n\nfunction changeCanvasSize(e) {\n  if (e.target.tagName === 'BUTTON') {\n    const { target } = e;\n    const size = +target.textContent;\n    const oldSize = document.querySelector('.canvas-size .selected');\n    oldSize.classList.remove('selected');\n    target.classList.add('selected');\n    deleteOldFrame(size);\n    createCanvas(size);\n  }\n}\n\nfunction handleCanvasSizeButton() {\n  canvasSizeButton.addEventListener('click', changeCanvasSize);\n}\n\nexport default handleCanvasSizeButton;\n","import storage from '../../components/storage';\n\nconst primaryColorField = document.querySelector('.colors__primary-color');\nconst secondaryColorField = document.querySelector('.colors__secondary-color');\nconst arrowChange = document.querySelector('.colors__arrow');\n\nfunction changePrimaryColor() {\n  storage.colors.primaryColor = this.value;\n}\n\nfunction changeSecondaryColor() {\n  storage.colors.secondaryColor = this.value;\n}\n\nfunction changeColors() {\n  const { primaryColor, secondaryColor } = storage.colors;\n  storage.colors.primaryColor = secondaryColor;\n  storage.colors.secondaryColor = primaryColor;\n  primaryColorField.value = secondaryColor;\n  secondaryColorField.value = primaryColor;\n}\n\nfunction handleColorsChange() {\n  primaryColorField.addEventListener('change', changePrimaryColor);\n  secondaryColorField.addEventListener('change', changeSecondaryColor);\n  arrowChange.addEventListener('click', changeColors);\n}\n\nexport default handleColorsChange;\n","import storage from '../../components/storage';\n\nclass Tools {\n  constructor() {\n    this.tools = document.querySelector('.tools');\n    this.pen = document.querySelector('.tools__pen-tool');\n    this.paintBucket = document.querySelector('.tools__paint-bucket-tool');\n    this.paintSameColor = document.querySelector('.tools__paint-same-color-tool');\n    this.colorPicker = document.querySelector('.tools__color-picker-tool');\n    this.eraser = document.querySelector('.tools__eraser-tool');\n    this.line = document.querySelector('.tools__line-tool');\n    this.rect = document.querySelector('.tools__rectangle-tool');\n    this.circle = document.querySelector('.tools__circle-tool');\n    this.dithering = document.querySelector('.tools__dithering-tool');\n    this.lighten = document.querySelector('.tools__lighten-tool');\n    this.currentTool = null;\n  }\n\n  chooseTools(event) {\n    let { target } = event;\n    while (target !== this.tools) {\n      if (target.tagName === 'BUTTON') {\n        if (storage.currentTool !== null) { this.currentTool.style.background = ''; }\n        const colorTools = '#acc7cd';\n        switch (target) {\n          case this.pen:\n            storage.currentTool = 'pen';\n            this.currentTool = this.pen;\n            this.pen.style.background = colorTools;\n            break;\n          case this.paintBucket:\n            storage.currentTool = 'paintBucket';\n            this.currentTool = this.paintBucket;\n            this.paintBucket.style.background = colorTools;\n            break;\n          case this.paintSameColor:\n            storage.currentTool = 'paintSameColor';\n            this.currentTool = this.paintSameColor;\n            this.paintSameColor.style.background = colorTools;\n            break;\n          case this.colorPicker:\n            storage.currentTool = 'colorPicker';\n            this.currentTool = this.colorPicker;\n            this.colorPicker.style.background = colorTools;\n            break;\n          case this.eraser:\n            storage.currentTool = 'eraser';\n            this.currentTool = this.eraser;\n            this.eraser.style.background = colorTools;\n            break;\n          case this.line:\n            storage.currentTool = 'line';\n            this.currentTool = this.line;\n            this.line.style.background = colorTools;\n            break;\n          case this.rect:\n            storage.currentTool = 'rectangle';\n            this.currentTool = this.rect;\n            this.rect.style.background = colorTools;\n            break;\n          case this.circle:\n            storage.currentTool = 'circle';\n            this.currentTool = this.circle;\n            this.circle.style.background = colorTools;\n            break;\n          case this.dithering:\n            storage.currentTool = 'dithering';\n            this.currentTool = this.dithering;\n            this.dithering.style.background = colorTools;\n            break;\n          case this.lighten:\n            storage.currentTool = 'lighten';\n            this.currentTool = this.lighten;\n            this.lighten.style.background = colorTools;\n            break;\n          default:\n            break;\n        }\n      }\n      target = target.parentNode;\n    }\n    return storage.currentTool;\n  }\n\n  addTooltips(event) {\n    let { target } = event;\n    let res;\n    while (target !== this.tools) {\n      if (target.tagName === 'BUTTON') {\n        target.children[1].style.display = 'flex';\n        res = getComputedStyle(target.children[1]).display;\n      }\n      target = target.parentNode;\n    }\n    return res;\n  }\n\n  removeTooltips(event) {\n    let { target } = event;\n    let res;\n    while (target !== this.tools) {\n      if (target.tagName === 'BUTTON') {\n        target.children[1].style.display = 'none';\n        res = getComputedStyle(target.children[1]).display;\n      }\n      target = target.parentNode;\n    }\n    return res;\n  }\n\n  handleEventsTools() {\n    this.tools.addEventListener('click', this.chooseTools.bind(this));\n    this.tools.addEventListener('mousemove', this.addTooltips.bind(this));\n    this.tools.addEventListener('mouseleave', this.removeTooltips.bind(this), true);\n  }\n}\n\nexport default Tools;\n","import Tools from '../tools/tools';\n\nclass Keyboard extends Tools {\n  constructor() {\n    super('keyboard');\n    this.keyboardButton = document.querySelector('.keyboard-modal--button');\n    this.keyboardModal = document.querySelector('.keyboard-contain');\n    this.closeKeyboard = document.querySelector('.close');\n  }\n\n  showModalWindow() {\n    this.keyboardModal.style.display = 'flex';\n  }\n\n  closeModalWindow() {\n    this.keyboardModal.style.display = 'none';\n  }\n\n  handleKeyDown(e) {\n    const key = e.code;\n    const event = {\n      target: null,\n    };\n    switch (key) {\n      case 'KeyP':\n        event.target = this.pen;\n        break;\n      case 'KeyB':\n        event.target = this.paintBucket;\n        break;\n      case 'KeyA':\n        event.target = this.paintSameColor;\n        break;\n      case 'KeyO':\n        event.target = this.colorPicker;\n        break;\n      case 'KeyE':\n        event.target = this.eraser;\n        break;\n      case 'KeyL':\n        event.target = this.line;\n        break;\n      case 'KeyR':\n        event.target = this.rect;\n        break;\n      case 'KeyC':\n        event.target = this.circle;\n        break;\n      case 'KeyT':\n        event.target = this.dithering;\n        break;\n      case 'KeyU':\n        event.target = this.lighten;\n        break;\n      default:\n        break;\n    }\n    if (event.target !== null) {\n      this.chooseTools(event);\n    }\n  }\n\n  handleKeyboardModalWindow() {\n    this.keyboardButton.addEventListener('click', this.showModalWindow.bind(this));\n    this.closeKeyboard.addEventListener('click', this.closeModalWindow.bind(this));\n    document.addEventListener('keydown', this.handleKeyDown.bind(this));\n  }\n}\n\nexport default Keyboard;\n","import GIF from '../../gif';\nimport storage from '../../components/storage';\n\n// const preview = document.querySelector('.preview-contain__preview');\n\nexport default class Export {\n  constructor() {\n    this.exportToGIFButton = document.querySelector('.export-contain__gif');\n  }\n\n  static exportToGif() {\n    const gif = new GIF({\n      workers: 2,\n      quality: 10,\n      background: '#e1e6e2',\n    });\n    window.console.log(gif, this.exportToGIFButton);\n    const ms = 1000 / storage.currentFps;\n\n    let frames = document.getElementsByClassName('frames-contain__frame');\n    frames = Array.prototype.slice.call(frames);\n    frames.forEach((elem) => {\n      gif.addFrame(elem, { delay: ms });\n    });\n\n    function f(blob) {\n      const link = document.createElement('a');\n      link.setAttribute('href', URL.createObjectURL(blob));\n      link.setAttribute('download', 'download');\n      link.click();\n    }\n\n    gif.on('finished', f);\n\n    gif.render();\n  }\n\n  handleExports() {\n    this.exportToGIFButton.addEventListener('click', Export.exportToGif);\n  }\n}\n","import handleAddFrameButton from '../screens/frames/add-frame-button';\n// import handleClickOnTools from '../screens/tools/handle-click-on-tools';\nimport handleSliderFPS from '../screens/preview/slider-fps';\nimport createPreviewAnimation from '../screens/preview/preview-animation';\nimport handleFullscreenMode from '../screens/preview/fullsreen-mode';\nimport storage from './storage';\nimport handleCanvasSizeButton from '../screens/canvas/canvas-size-button';\nimport handleFrameTool from '../screens/frames/handle-frame-tool';\nimport handleColorsChange from '../screens/colors/colors';\nimport Tools from '../screens/tools/tools';\nimport Keyboard from '../screens/keyboard/keyboard-shortcuts';\nimport Export from '../screens/export/export';\n\nconst tools = new Tools();\nconst keyboard = new Keyboard();\nconst exp = new Export();\n\nfunction start() {\n  handleAddFrameButton();\n  tools.handleEventsTools();\n  handleSliderFPS();\n  createPreviewAnimation(storage.currentFps);\n  handleFullscreenMode();\n  handleCanvasSizeButton();\n  handleFrameTool(storage.frame.currentFrame);\n  handleColorsChange();\n  keyboard.handleKeyboardModalWindow();\n  exp.handleExports();\n}\n\nexport default start;\n","import './index.scss';\nimport storage from './components/storage';\nimport createCanvas from './screens/canvas/canvas';\nimport start from './components/start-app';\n\nconst sideCanvas = 32;\nstorage.canvas.sizeCanvas = sideCanvas;\n\ncreateCanvas(sideCanvas);\n\nstart();\n"],"sourceRoot":""}